{"data":{"site":{"siteMetadata":{"title":"Christian Brevik","author":"Christian Brevik"}},"markdownRemark":{"id":"758e7083-17a0-5d87-9a65-93668a64e6d3","excerpt":"It’s kind of funny how sometimes an open source project never really stops evolving. It definitely should though, don’t get me wrong. There…","html":"<p>It’s kind of funny how sometimes an open source project never really stops evolving.</p>\n<p>It definitely should though, don’t get me wrong. There is value in saying a project is “done”. But, my <a href=\"https://github.com/idehub/react-native-google-analytics-bridge\">React Native bridge for Google Analytics</a> isn’t quite there yet.</p>\n<p>In the latest version I have added a simple Google Tag Manager (GTM) implementation which allows you to retrieve values from a container.\nThe added benefit here is that you can connect your GTM containers to your Google Analytics (GA) views, and perform “Content Experiments”. In other words, A/B-testing.</p>\n<p>The guide from Google on how to do the above can be found <a href=\"https://support.google.com/tagmanager/answer/6003007\">here</a>. And while it seems comprehensive it is really quite simple.</p>\n<p>What you do, after linking your GTM and GA, is setup a “Google Analytics Content Experiment” at GTM, with a specific goal (defined at your GA view) as the experiment objective.</p>\n<p>At the same time you also define experiment variations (in JSON) which will serve as the A/B testing parameters. It might look something like:\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37cfab24037ac9d2f37c559687789028/9c63f/Screen-Shot-2016-04-24-at-14-14-35.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 22.96819787985866%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAlUlEQVQY022QCQrFIAxEvf9Vq61LW+v+eQFL4SsMmSRjJkQ554b3XgDPOY/ruiQ/z/NFCGHc9y0cHZre+x8UohijiEEpZcwan57nERNQa5WYUhLd6ik2wR3AEW/bJsOMMRJ5rbUXbELE4AtqauXCYGvtOI7jNWP4vu9Sm72Za63lDOjU6g402GzeDcC/N519OAuQo/sBE/mFBWZGle0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Content Experiment variations\"\n        title=\"\"\n        src=\"/static/37cfab24037ac9d2f37c559687789028/fb8a0/Screen-Shot-2016-04-24-at-14-14-35.png\"\n        srcset=\"/static/37cfab24037ac9d2f37c559687789028/1a291/Screen-Shot-2016-04-24-at-14-14-35.png 148w,\n/static/37cfab24037ac9d2f37c559687789028/2bc4a/Screen-Shot-2016-04-24-at-14-14-35.png 295w,\n/static/37cfab24037ac9d2f37c559687789028/fb8a0/Screen-Shot-2016-04-24-at-14-14-35.png 590w,\n/static/37cfab24037ac9d2f37c559687789028/526de/Screen-Shot-2016-04-24-at-14-14-35.png 885w,\n/static/37cfab24037ac9d2f37c559687789028/9c63f/Screen-Shot-2016-04-24-at-14-14-35.png 1132w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>In this scenario, your users will be given either the <code class=\"language-text\">A_pack</code> or <code class=\"language-text\">B_pack</code> by GTM. The values from the JSON are then the same values which can be retrieved from the GTM container on the device.</p>\n<p>Here is where my library comes in. With the newest version, retrieving parameters from the container can be done as simple as:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> GoogleAnalytics<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  GoogleTagManager<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native-google-analytics-bridge'</span>\nGoogleTagManager<span class=\"token punctuation\">.</span><span class=\"token function\">openContainerWithId</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GT-NZT48'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> GoogleTagManager<span class=\"token punctuation\">.</span><span class=\"token function\">stringForKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>str <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Pack: '</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>You can then use these parameters to change the app experience/flow depending on what you are attempting to test.</p>\n<p>The experiment objective in the scenario above is linked to a goal which triggers on my Ecommerce/Purchase event:\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b37f97c458d727712790e59bf785e39b/59197/Screen-Shot-2016-04-24-at-14-33-59.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.99319727891157%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9klEQVQ4y52U2YrbQBBF9f8QyHsI5BfyHWHIwwgv8iZbtnZrs6zV0k3fmvSMPUOIkoaiF3WdvrXYxtfnL7B8C6EXwg98HA4HNE2DruvQti04xnHE1GH8DJ7gnl2cnBM8z4Nt20iSBNfrFXme43a7vUKngA2oO8NtQFVVqOtaAIRR4eVyQd/3/6TS+Pz0CabzDGfnYGfvsNlsxNbr9SucD02FGt7FR5IniKNYQo2iCEEQII5jZFn2Iey/h6xGqxQEYSjANE0FRlUsCk2DJgG/mzHcpERZ5MiUGgLLsny4pAsyxYxvPyLMbB/2dgN7v8dsNpNK/++QkLM0wXa7xfF4lHm5XCJUKdC9yPDZm7SHvZq7Vp01NerqpXgGs8KWIYC5O5/PMrMwLJAuFM94h+uXfaT2Ebw4wylKEZxT4YjCYRikkloR17R7Nfo7+7JpWjmrlRV1j7zqUXfDW8gkUxFbhGv+/LhnY3MQQqVUT3V8aFAFoJBxYEu9dYEA2bzMH53Ye4vFQqAMk05Uw3C1UTUfoWIa1Y/3wKIoBMgPVDWfz6XSGkgnghzHkbaiI4G8r+cHhXyRfwwablmWPEBnnV/2ps6lhvwRSMhe9SAH82iaJlarlagkiE5MBVPD9b3pkD8oZHh67bquFIVhEkKVPKfz+LsY700DfwH6giQjzxX1pwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Ecommerce Purchase goal setup\"\n        title=\"\"\n        src=\"/static/b37f97c458d727712790e59bf785e39b/fb8a0/Screen-Shot-2016-04-24-at-14-33-59.png\"\n        srcset=\"/static/b37f97c458d727712790e59bf785e39b/1a291/Screen-Shot-2016-04-24-at-14-33-59.png 148w,\n/static/b37f97c458d727712790e59bf785e39b/2bc4a/Screen-Shot-2016-04-24-at-14-33-59.png 295w,\n/static/b37f97c458d727712790e59bf785e39b/fb8a0/Screen-Shot-2016-04-24-at-14-33-59.png 590w,\n/static/b37f97c458d727712790e59bf785e39b/59197/Screen-Shot-2016-04-24-at-14-33-59.png 882w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>So all I need to do in order to in order to say that a goal has been completed for a specific user, is to track this event through my library:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">GoogleAnalytics<span class=\"token punctuation\">.</span><span class=\"token function\">trackEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ecommerce'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Purchase'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Eventually the experiment will announce a winner between my <code class=\"language-text\">A_pack</code> and <code class=\"language-text\">B_pack</code> (in my GA view under Behavior -> Experiements), and the A/B-testing for this scenario is concluded.</p>\n<p>Hope this blog post has been helpful, visit the <a href=\"https://github.com/idehub/react-native-google-analytics-bridge\">Github repo</a> for an installation guide and API.</p>","frontmatter":{"title":"Google Tag Manager and A/B-testing with React Native","date":"April 24, 2016"}}},"pageContext":{"slug":"/gtm-ab-testing/","previous":{"fields":{"slug":"/react-native-inapp-billing/"},"frontmatter":{"title":"React Native InApp Billing"}},"next":{"fields":{"slug":"/you-should-check-out-yarn/"},"frontmatter":{"title":"You should check out Yarn"}}}}