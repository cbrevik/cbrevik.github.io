{"data":{"site":{"siteMetadata":{"title":"Christian Brevik","author":"Christian Brevik"}},"markdownRemark":{"id":"06bf1c70-8cef-5c1d-96b6-629242ab911f","excerpt":"Lately I’ve been working on stabilizing an application for a client on a test server. Sometimes the server logs won’t give you the answer…","html":"<p>Lately I’ve been working on stabilizing an application for a client on a test server. Sometimes the server logs won’t give you the answer. You’ve been there many times; “works on my machine”, but not the server.</p>\n<p>Remote debugging can be of help, but you’ll headbutt the wall trying to make it work. I ran into some trouble myself. This post was written in response to what I feel is a lack of collected information on the subject.</p>\n<p><strong>Disclaimer</strong>: I do not recommend trying to remotely debug a production environment. This should only be done in a pre-production setting in order to squash bugs.</p>\n<h2>Most importantly</h2>\n<p>The things to remember:</p>\n<ol>\n<li>Symbol-files hold debug information for your application, in .NET these are called PDB-files. They <strong>must</strong> be available if you want to remotely debug your application.</li>\n<li>The PDB-files are generated when you build your application, and they <strong>must</strong> match the exact build you have on the server you want to remotely debug.</li>\n</ol>\n<p>The second point is probably the one which catches a lot of people unware. You cannot use PDB-files from a different build to debug the exact build which is on the server.</p>\n<p>When you build your application, the DLL and PDB-files are <a href=\"http://www.wintellect.com/devcenter/jrobbins/pdb-files-what-every-developer-must-know\">embedded with a GUID</a>. The debugger looks for the same name (e.g. YourApp.dll and YourApp.pdb), but it also looks at the GUID.\nIf the GUID doesn’t match between the DLL and the PDB, the debugger won’t load the symbols!</p>\n<p>This means it’s important that you keep your symbol-files for each build you intend to deploy.</p>\n<p>There are a couple of things to be aware of when trying to make your application debuggable. I’ll go through a few things to consider.</p>\n<h2>What doesn’t matter</h2>\n<p>Usually in your Web.config file you will find the following element:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;configuration&gt;\n\t&lt;system.web&gt;\n\t\t&lt;compilation debug=&quot;true&quot; /&gt;\n    &lt;/system.web&gt;\n&lt;/configuration&gt;</code></pre></div>\n<p>Here <code class=\"language-text\">debug=&quot;true&quot;</code> has to do with how your application is compiled and behaves. But, it does <strong>not</strong> determine if PDB-files are generated.\nAmong many other things it; makes execution timeouts infinite, disables many optimizations and turns off resource caching.</p>\n<p>In your local development environment all these things are useful. But, definitely not in a production environment. With <code class=\"language-text\">debug=&quot;true&quot;</code> you will seriously hinder the application performance, and this is why you’ll usually want to remove it in your server build.</p>\n<p>So you want to put <code class=\"language-text\">&lt;compilation xdt:Transform=&quot;RemoveAttributes(debug)&quot; /&gt;</code>, or something similar, in the build-transform for your server (e.g. Web.Release.config).</p>\n<p>Again, <code class=\"language-text\">debug=&quot;true&quot;</code> has nothing to do with PDB-files, so do not worry about removing this element.</p>\n<h2>What does matter</h2>\n<p>If you want to generate PDB-files you will have to change your project properties for the relevant build configurations. You will have to do this for every project you want to debug.</p>\n<p>Go to the project properties, and in the Build tab select to relevant build configuration. In my example I want to do this for the “Release” build configuration which I’m going to use in my server deploy<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/Buildconfig-53f752c82670405655ac85fdca2697df-42a1a.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 17.90633608815427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVQY03XPu27CQBCFYT95lJdKRxEFIQoUQoW9C2aNb3sx2GtshJLmj72kTfHpjM5oioneNjnvccfyMLBOB7bHltX2xHo3U3xsBDtpgq+k5jMxyDSnKguUUqRpGtI5h7WW6HXx4GXx8+ebZdIRC4VQGjmJ05Lj2QaHTE+9oagMWtdUVUVZliGNMUFUFxmuzml0wWPouPkr+TnDTAeXxtE4i7MGazTt9cKt9/QT72f9NPf4mX920X6fkCSSk8po2y4sm6ZBCIEUMuTzrXnfMt7vjOP4jzu/1wokAwp+Tv0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Select the relevant build configuration\"\n        title=\"\"\n        src=\"/static/Buildconfig-53f752c82670405655ac85fdca2697df-fb8a0.png\"\n        srcset=\"/static/Buildconfig-53f752c82670405655ac85fdca2697df-1a291.png 148w,\n/static/Buildconfig-53f752c82670405655ac85fdca2697df-2bc4a.png 295w,\n/static/Buildconfig-53f752c82670405655ac85fdca2697df-fb8a0.png 590w,\n/static/Buildconfig-53f752c82670405655ac85fdca2697df-42a1a.png 726w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>(Sorry for the possible naming confusion with “Release”, but in this solution it is my pre-production build configuration. Go figure.)</p>\n<p>Now you can change the properties for this build configuration. If you look in the bottom of the Build tab you’ll find the Advanced button. Here you can change the debug info to specify whether PDB-files are generated or not.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/advbuildsettings-f57ec4135d352c7b7e24429bc0b30903-04f9d.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 512px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.421875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHklEQVQoz22TzW/TQBDF8zfDESquXDki8XHmBAdUiZYWEJS2aZyWurYTx0ls726yXq+9/kqR0orHZAuCFg4/zezIejvzZt3T49cQ0xPodACz+AYjzlDwITRzIOcDyNiB5mdQ6RBZ4vw6D1GKU/ruFKXFgZE+ZPAGPZ0cIwgZptMEfKGwWGqUVYequUTTfUemSszmDDIroLSxZDmh/oqqgCwuIaIj9Mr00Ip57jnGowCjIMByIcAZo7hAEs/RPz7GbDq1dcEZhOC3WAiGlC2R+Ps3goxLBL5nxTzXQ+D5uHAv4J67dMkYzmCIJEmhtYZS6j9kyHQNMfmMXpEc0EicOoltR4w645xupdxGQd2mJJYrmLJA+T+KHHVD9swOSTD9Cs+fIJpMIGWGpmlQVRUM0TY1YpEjYAYztUIkW6K7Q4upbDCWa8Thwc3Imw59z0M4Du1YG8HSGHRNhdMox6uTAntzYCf6gV1i5w670TW2I8B1v/wWZJiEITFBSl6ZyljBVVuhH+Z4/JbhyccKL5wrPDtZ4/lgTfk1xSvLS2eNpw5w1P9AguzQPpUkicHIqw1lWcKQ4KbTnLzLaItaCtSFImgBmaLtCmuRVktIPofKcvDwE3qG99GurtC2HdpuZanr9g9Nh6alWrNCVXeWJKsxmgnESwORlRiTVTHX9CPQOwze3Ufwfgv+7gPiIeX/sqn7d2qjva1b+Wj/Edzte/gJGzQXCbRTgyAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Change the debug info\"\n        title=\"\"\n        src=\"/static/advbuildsettings-f57ec4135d352c7b7e24429bc0b30903-04f9d.png\"\n        srcset=\"/static/advbuildsettings-f57ec4135d352c7b7e24429bc0b30903-dc4e8.png 148w,\n/static/advbuildsettings-f57ec4135d352c7b7e24429bc0b30903-29209.png 295w,\n/static/advbuildsettings-f57ec4135d352c7b7e24429bc0b30903-04f9d.png 512w\"\n        sizes=\"(max-width: 512px) 100vw, 512px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here your choices are:</p>\n<ul>\n<li>none - no PDB-files are generated</li>\n<li>pdb-only</li>\n<li>full</li>\n</ul>\n<p>Both “pdb-only” and “full” will generate the symbol files. What I’ve found in my own debugging is that both will allow you to step through code. But only “full” will allow you to load locals (values) and arguments. For “pdb-only” all values will be “optimized away.”</p>\n<p>Another thing which will optimize away locals is the “Optimize code” option in the Build tab. This has mostly to do with the JIT-compiler and its optimizations. Turning this off will of course give you worse performance.</p>\n<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/8cw0bt21.aspx\">MSDN</a>, setting debug to “full” will also give you some impact on performance<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>. If you choose “pdb-only” you will still be able to step-through and analyze crash dumps.</p>\n<p>There is no point in choosing “none” because of fear of performance impact, as generating symbol files will have <a href=\"http://www.wintellect.com/devcenter/jrobbins/do-pdb-files-affect-performance\">no impact</a> on the performance of your application.</p>\n<p>If you’re using publish profiles (*.pubxml) I’d recommend going into your project properties and unchecking “Exclude generated debug symbols” under Package/Publish Web. This also for the relevant build configuration.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/excludesymbols-02a8d571b2171afd00df9b5442cb87a0-1e685.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 510px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVQoz01SyU7DMBTMV/IJgPgzTiAuLBIVi5CAQneaxHFsNy1tEidO0gJtEdLw4lLgMJq3eTzPsjMWDOv3Csu5wXJRYEWouSgK5HlObGCMgdYacTxDmqYWWm9Z29kNDJzGQONRfeBevOGBcMMWFC+Qk4gQAq7rgTEGzkNibmtCKHiuj1BIKKVsn/k+Ai7h7B2vsXe0wi5hn+Kdwy8cnHwizUr4QYn+0BCIXwp0BwXavcLGnZ4B48a6yvPNBjrL4Hiu++8GjpyK86pEQQ45F5AqsjcLMaK5EFJGCEMFHtS9kXXM63PG2LUdz/MQBMwWQ0KSJKhIsCxLpMmMVpKIRiMoKYgVXieRZSlC24tnUyRx/PueDvMZhJTIyFktsn3geVXhYTDF2XUbF7ddnF49U9zC+XVnkzeecHnXR9ONkZBYbaSG49Oq48nkT+yH67zpZej6U7TdCZ5fxmgNI+IILcpbwzGGQqMjKvoFm/ka3xv5+mT7Kj67AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Uncheck exclude\"\n        title=\"\"\n        src=\"/static/excludesymbols-02a8d571b2171afd00df9b5442cb87a0-1e685.png\"\n        srcset=\"/static/excludesymbols-02a8d571b2171afd00df9b5442cb87a0-9b682.png 148w,\n/static/excludesymbols-02a8d571b2171afd00df9b5442cb87a0-ef5d6.png 295w,\n/static/excludesymbols-02a8d571b2171afd00df9b5442cb87a0-1e685.png 510w\"\n        sizes=\"(max-width: 510px) 100vw, 510px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>That about covers what you need to do with the project files. Now your project-file (*.csproj) will contain something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;PropertyGroup Condition=&quot; &#39;$(Configuration)|$(Platform)&#39; == &#39;Release|AnyCPU&#39; &quot;&gt;\n &lt;DebugType&gt;full&lt;/DebugType\n &lt;ExcludeGeneratedDebugSymbol&gt;false&lt;/ExcludeGeneratedDebugSymbol&gt;\n &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;\n &lt;Optimize&gt;false&lt;/Optimize&gt;\n&lt;/PropertyGroup&gt;</code></pre></div>\n<h2>What you need to do on the server</h2>\n<p>In order to debug remotely you’ll have to install remote tools on the server. There are of course a few other <a href=\"https://msdn.microsoft.com/en-us/library/bt727f1t.aspx#BKMK_Prerequisites\">pre-requisites</a> to make this work:</p>\n<ul>\n<li>You have to be connected over network to the server for remote debugging.</li>\n<li>You must be an administrator to install the remote tools on the remote server.</li>\n<li>To communicate with the remote tools, you must have user access to the remote server (e.g. a domain account).</li>\n<li>The remote server must be running the remote tool when you want to debug.</li>\n</ul>\n<p>There are <a href=\"https://msdn.microsoft.com/en-us/library/bt727f1t.aspx#BKMK_Installing_the_Remote_Tools\">multiple versions of the remote tools</a>, choose the download that matches your Visual Studio version, and the operating system on the server. After the remote tools are installed you’ll need to do a few more things to make it work.</p>\n<p>If you have a firewall in front of the server you’ll need to open up port 4018, which is used for remote debugging. If you have Windows Firewall on the server you can open up this port by going to Advanced Settings on the Windows Firewall and adding an Inbound rule to open up port 4018.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-b7cef.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 54.842615012106535%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQoz3WRTW+bQBCG+beplLT3qn+j7aFSqkrtqVWstteox1Zx0gTHnwGDYcEYbMynDcRgeDusiWUrKtKjmd2FZ3YG4fddB9cjBTejMa4GY4gTA31moUf0jdl/GZg27sYa/nSHaA8kXPUfOIKkWdDYBApjUBQDpmHDs0y4UwOOrhETHueGfgTfYzoWJsPCaKBcGHRvIUtDDEcSWqKE99djvLn4hdffLvHq03e8JM4+tnDy7gteECdvP3NOzy/4/ul5A+VnH75CUFUNqixD1hh+3sv40VPRuldwOXFw42/QXmZouyn+LnfcNojxFp1ViU7cUOfRFoLrRUiTFN4qgWq72ARLZFGATRwiX0VEzAFKotrFiiiL51QkzLIU9ZPROx1ziqnjYZ0+Ii8KJGkKZhiY6Dp0ZoARtuPADwJ4vk8EzxDWScKF63wLeeFhUX9AB1mWISWhpmnQSRjHMcIwRBRFe+p1QPKAx5CvhaQRJkWJh1mAiCo/PbVwTgXm8zlc14VD+SG1rJYcsheu8gIsSFDmOaqq2o2BbjmlMUgPElRFhW3bmM0IirZdtx42rfqcusBeGG8KzNaPPC8PhKZpQhRF9Lo9flNGBQzLhrNwYdlz+GFExPAo8hkeCq1VdiSsz+qqMf3lp5nx1umGHGo7DI/b/gc5OigoqFVYvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Windows firewall inbound rule\"\n        title=\"\"\n        src=\"/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-fb8a0.png\"\n        srcset=\"/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-1a291.png 148w,\n/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-2bc4a.png 295w,\n/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-fb8a0.png 590w,\n/static/winfirewall-918d365a3c85e65d6dc5f197b14f3fc3-b7cef.png 826w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>You can set security on this rule as appropriate, for example by only allowing connections from authenticated users.</p>\n<p>When starting the Remote Debugger (as the server tool is called), I’d recommend right-clicking and “Run as administrator”.\nNow go to Tools > Options and set authentication mode to Windows Authentication, then click permissions and add the user you want to use for debugging (from Visual Studio).</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/remotetoolsoptions-cd2f0b358949efe0d6c86554f01f3864-99108.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 422px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 89.81042654028435%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADWklEQVQ4y3WU228bVRDG9z/lkSdEaaVKEIHgAakCIUSoKhCPKKUBcRFKaJLWcSBO3NRx0rW99/iyN6+9912vvXaK+Jhz3AQH6MNP5+zM+jvfzJy1sN9s4UDpYutZE9/tVfFD9QgbO1U8enJAzwfYfPoHZ+NxBRu7LF7FQ4o/4u8e8xzbbz79HQ8pL8jdAdSBhc5FD6Ki4UxWoZs2dMuBRnG524fSNyFRvqUZ6BhdsN/weM8kBhyRcqJqQDBUFc6gj66mwfc8xL6PoWXC6vUwcl1cliUuF3O8XCxwOS+xmE1vUs54Lo1j+OMRhFsVCbePB7hd6+HuMwvvNYe4dXiBt6oa7tb7WHtu4p0nIu5UOnj3xMLa2QhrTY/z/pmHt+nd9W9/xt6bb+Cnjz6E8EHDxtdahPtKgPtygC8lHw/UiPPxeYh7TRef1jV8cqzh8xcu1qUAX3R8zjrxGcW+Ouxg85ddPNiuQdhVLXi6Ar3Thn1hQG+34DsW5nmCH09TiL0EVCvKGTGdoiyKJZMl82KKolxg9udfOPELCNuag1meYhyECMIIYRQt1zhBksSIWG/omRFE8RLKhXHK32GwWB5HaDghhB1jiKHZR6N5DlFsQZZltFttjMY+0jQj0ZTWm4RhiPF4DJ8GGAQBfIIJNr0YwmMS9F0HBpVrGBfo9Wni3S4kSYKuG1wgSRIO28fkmOXr9Tr296uo1Y7Q7kh0U3o4HZLgb7qLIomgqDpkEmEOxVYLrjvkAlmWXYterRG1hblkDsdUCXM4ofZwQdbDknrISjRNk1zp3IFl2XAch2IWF1gVvTqIkbMDiVmeockdkuDLaYEsnyB5VRJb2TCYi9FoxPcJF1wSM5dxfE1IQ7l2uKXYGBg6JEWBqmpQ6PPT6Kthpff7A+R5fsMdE3AdF5PJhOcYzEw5yXBi+8uSiziE92pqbHrMFYM9X4v9q4eskivYIUVKDt1oWfJlkfOSrvqyymrfVversBZMs3R5bbb4UDJ+WXlvVoj/Q8pJ6H7+syeyHAUJ8h7u6Q5oRPyEef7/sFuwoB5FfoAu3VXx7Bx9+vuy6QZorRdoHNdgqTJOTQ/CN6KFBikfWiFq9us5siMcDALs6ENsyxZ2dQ+VrocdZYBfRQMVzcL3+hh/AzVfExCJkAUfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Remote tools options\"\n        title=\"\"\n        src=\"/static/remotetoolsoptions-cd2f0b358949efe0d6c86554f01f3864-99108.png\"\n        srcset=\"/static/remotetoolsoptions-cd2f0b358949efe0d6c86554f01f3864-a3440.png 148w,\n/static/remotetoolsoptions-cd2f0b358949efe0d6c86554f01f3864-90288.png 295w,\n/static/remotetoolsoptions-cd2f0b358949efe0d6c86554f01f3864-99108.png 422w\"\n        sizes=\"(max-width: 422px) 100vw, 422px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>It is possible to run the Remote Debugger as a service, but this is generally not recommended. If you wish to do so you can run the Remote Debugger Configuration wizard to set this up.</p>\n<p>One last thing; in order for the debugger in Visual Studio to attach to the process, it needs to have access to the PDB-files somehow. If you do not have a Symbol/Source server<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>, then probably the easiest way to accomplish this is through file share.</p>\n<p>Since I do not want to share the <code class=\"language-text\">\\bin</code> folder from my solution web root, I normally copy my PDB-files into their own <code class=\"language-text\">\\symbols</code>, and share this on the network. Later you’ll need to define the network path to this folder in Visual Studio.\nA minor issue here is that Visual Studio won’t allow you to authenticate to this folder, so either authenticate by visiting it explicitly outside VS<sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup>, or share it with “Everyone”.</p>\n<h2>Debugging in Visual Studio</h2>\n<p>First off, to state the obvious, the source files you’re attempting to use for debugging should match the release that is on the server. Retrieve it from version control if you have to.\nYou’ll still likely run into some problems when debugging remotely, so there’s a few option you should set.</p>\n<p>In Visual Studio, go to Tools > Options > Debugging > General and:</p>\n<ul>\n<li>Uncheck “Enable Just My Code”</li>\n<li>Uncheck “Require source files to exactly match the original version”</li>\n</ul>\n<p>Then go to Symbols under Debugging. Click the folder-icon up right to define your own symbol locations. Here the network path to your symbols folder (as defined in the previous section) should be put, and remember to check the box next to the path.\nAgain Visual Studio will not let you authenticate here, so you should do it manually somehow<sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup>.</p>\n<p>Since the process of downloading the symbols might be slow, you should define a directory to cache them in (as shown below).</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/symbols-ed5de66fa00f74e2a3216731440782be-45fcc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.17941952506597%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVQoz31TW27bMBD0jftdoG0e6CH60yP0EkXRJk5sp7Gt6EFZD0uWKJEUaT2MIB/TJZ0W+aqAAcnl7uzucDWTiyvIxSXE/QXU8grd8tqdm/lHiLtPqG8vkHz/QPeXzi7tSr4ubvkZ3eoaLdnZ1/dgX95hxhsJXleQUmIYegelFIoiR5YmEKJF23CItoGSgvxa56tEiaZYo8wS7LMUjaygq1+Y7XY5Aj8gghJaa0zThKqqcagq+E8+thsP6/UGjMXo+4ESDuiHCWMvYEQAwTklbNE0lCwjwjDagUWRI7POlrAoClR1TQS9g717eXnB/z4bJ7OfmOX5wRH+DT6dTo6waRqM44jh1W6McQnt/YmCLaZpdOfn52ccj0fInCoUQuPJ8xCzHTQFjeO5wpLa9sMY662PJCtR1qSlMjD9BH0cYahtPVDysiQ5mCug299gtvESzOcrhFGGfM+xLxpEJAMnXaTSqHlL5Bw1aaQ6g1Z2tG8RUQF+yOD7lDBJwUlLZQn9IEYUhmjb1olu2zwcKtSkYUyZGd3t4hhhEKCmhzJGo+sUvbg8gybCamyhbMsRS5EmdjyEI7OweghK8NtjuH0IMH9kuCMcqO0zYfePxMKeLRxhEDBs14+uGqUkpnEgp87N3hPL8Bjk8FjuWrJ2W52FJhg6n1ft9jKnV67bnnSSNCY04G0HczxBdkR6nNDRXugJypzcY3RmpIcbaZ3A5YCCazRqcPE1p0Tlgv6U/QY8W4HnD26t0iXqN+Cv61t7la6QRveIvBtkbIGd98Oh3HzDH+xsca1lamaeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Symbols define network path\"\n        title=\"\"\n        src=\"/static/symbols-ed5de66fa00f74e2a3216731440782be-fb8a0.png\"\n        srcset=\"/static/symbols-ed5de66fa00f74e2a3216731440782be-1a291.png 148w,\n/static/symbols-ed5de66fa00f74e2a3216731440782be-2bc4a.png 295w,\n/static/symbols-ed5de66fa00f74e2a3216731440782be-fb8a0.png 590w,\n/static/symbols-ed5de66fa00f74e2a3216731440782be-45fcc.png 758w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Next I recommend checking “Only specified modules”, then click the link below it to specify which modules you want to debug (e.g. YourApp.dll).</p>\n<p>Now finally, we’re ready to start debugging!</p>\n<p>Go to Tools > Attach to Process (CTRL + ALT + P, handy shortcut).\nThe Transport should be Default. In the Qualifier (where your computer name probably is), type the IP/host of the remote server, and add port 4018. For example <code class=\"language-text\">myserver:4018</code>.</p>\n<p>Next press Enter and you will most likely be prompted to authenticate. Login with the user as defined in the remote tools on the server.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/attachstep1-179b696f40ee335bc96de26ec56340e6-1fe17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.10586881472957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDklEQVQY002QSU/DMBCF8+eRWErhyv9BcKIsShMalmxeEsdLbNrzY+xWkMOn53nzNKNxZp7PoTbXMK/rxLS5Ir2BeVnDUj08rVA/XKB9vEzvmNHUMwtcfgt5v8Lu7gyZYgUYV/jZHzD7PT7rHr2cMNmQ0IRxR/TJWzIoAylHiGGAPThkQ/uGPC/xUe3QNC06JtB2DJOxR/RCl5CntIGQA5q6huAClvzMiAJV9YViu8V7WUIKkRCc/yOisvTmjB3hUXvS6HFYYzDPM53c57RlhPczQvAYxxGGmt77FFgSveQTIYS/TMxrreGci3+Y47vuwGirphOsdSkQNYadI04DrbWpFz2lVKrjEKWmlI/1LwlAtsb1efFzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Attach to process step 1\"\n        title=\"\"\n        src=\"/static/attachstep1-179b696f40ee335bc96de26ec56340e6-fb8a0.png\"\n        srcset=\"/static/attachstep1-179b696f40ee335bc96de26ec56340e6-1a291.png 148w,\n/static/attachstep1-179b696f40ee335bc96de26ec56340e6-2bc4a.png 295w,\n/static/attachstep1-179b696f40ee335bc96de26ec56340e6-fb8a0.png 590w,\n/static/attachstep1-179b696f40ee335bc96de26ec56340e6-1fe17.png 869w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Check “Show all processes from all users”, and select the <code class=\"language-text\">w3wp.exe</code> or whichever process which corresponds to your application (make sure it’s running). Next click Attach, and you’re off!</p>\n<p>If your symbols are not loading automatically you might have to do it manually.\nWhile attached to the process, in VS go to Debug > Windows > Modules. Scroll down to the module you want to debug, right-click and select “Load Symbols”.</p>\n<p>If it’s still not loading, either the network path is not reachable, or the symbol does not match the assembly (remember the GUIDs). You can also right-click the module and select “Symbol Load Information” to see where the debugger has looked, and the results of that search.</p>\n<p>That’s all there is to it, I hope this will be of help to you!</p>\n<hr>\n<p>Footnotes:</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>  If you’re going to change the properties for a lot of the projects in your solution, it would be easier to set the relevant build configuration in the top of Visual Studio under your menu bar. This is because your project properties can also track the “Active” build configuration. If you’re going to switch between build configurations to compare though, it’s faster to do this in your project properties.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-2\">\n<p>  This MSDN article might be out-dated, and “full” might not give you that much of an performance impact. According to <a href=\"http://www.wintellect.com/devcenter/jrobbins/do-pdb-files-affect-performance\">some</a> there is no difference between “pdb-only” and “full”, and that they only exist for historical reasons. If you’re going to do a lot of debugging on the remote environment, then the performance trade-off might be worth it (or possibly non-existent).</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-3\">\n<p>  A <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680693(v=vs.85).aspx\">Symbol Server</a> lets your index your PDB-files for releases, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680641(v=vs.85).aspx\">Source Server</a> does the same for source files. This makes for easier retrieval of these files if you need to debug certain releases. If you’re using Team City to build and test your releases, you could make <a href=\"http://blog.jetbrains.com/teamcity/2015/02/setting-up-teamcity-as-symbol-and-source-server/\">indexing your symbol files and source files</a> as a part of the build.</p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-4\">\n<p>  You could also “Map a network drive” in Windows to automatically re-authenticate.</p>\n<a href=\"#fnref-4\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Remote debugging ASP .NET in Visual Studio 2013","date":"April 03, 2015"}}},"pageContext":{"slug":"/remote-debugging-vs2013/","previous":{"fields":{"slug":"/vnext/"},"frontmatter":{"title":"vNext tools on OS X"}},"next":{"fields":{"slug":"/google-analytics-on-react-native/"},"frontmatter":{"title":"Google Analytics on React Native"}}}}